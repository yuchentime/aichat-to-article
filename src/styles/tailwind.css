@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS 变量定义 */
:root {
  color-scheme: light dark;
  
  /* 品牌色 */
  --color-primary: 99 102 241;
  --color-primary-light: 129 140 248;
  
  /* 状态颜色 */
  --color-status-completed: 16 185 129;
  --color-status-running: 59 130 246;
  --color-status-pending: 245 158 11;
  --color-status-error: 239 68 68;
  
  /* 同步状态 */
  --color-sync-success: 16 185 129;
  --color-sync-pending: 107 114 128;
  
  /* 中性色 */
  --color-gray-50: 248 250 252;
  --color-gray-100: 241 245 249;
  --color-gray-200: 226 232 240;
  --color-gray-300: 203 213 225;
  --color-gray-400: 148 163 184;
  --color-gray-500: 100 116 139;
  --color-gray-600: 71 85 105;
  --color-gray-700: 51 65 85;
  --color-gray-800: 30 41 59;
  --color-gray-900: 15 23 42;
}

.dark {
  --color-bg: var(--color-gray-900);
  --color-surface: var(--color-gray-800);
  --color-border: var(--color-gray-700);
  --color-text: var(--color-gray-100);
}

/* 基础样式 */
html, body, #root {
  height: 100%;
}

body {
  @apply bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100;
  margin: 0;
  font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 自定义组件样式 */
@layer components {
  /* 按钮组件 */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-primary {
    @apply bg-gradient-to-r from-primary-500 to-primary-400 text-white hover:from-primary-600 hover:to-primary-500 focus:ring-primary-500 shadow-sm hover:shadow-md;
  }
  
  .btn-secondary {
    @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-gray-500;
  }
  
  .btn-danger {
    @apply bg-red-500 text-white hover:bg-red-600 focus:ring-red-500;
  }
  
  /* 卡片组件 */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-card hover:shadow-card-hover dark:shadow-card-dark dark:hover:shadow-card-hover-dark transition-all duration-200 ease-out;
  }
  
  /* 输入组件 */
  .input {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200;
  }
  
  /* 模态框 */
  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm;
  }
  
  .modal-content {
    @apply bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden;
    max-width: 95vw;
  }
}

/* Markdown content styling */
.markdown-content {
  line-height: 1.7;
}

.markdown-content pre {
  @apply rounded-lg overflow-x-auto my-4;
}

.markdown-content code {
  @apply text-sm font-mono;
}

.markdown-content .mermaid-diagram {
  @apply flex justify-center items-center my-4;
}

.markdown-content .mermaid-diagram svg {
  @apply max-w-full h-auto;
}

/* 自定义工具类 */
@layer utilities {
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .text-status-completed {
    color: rgb(var(--color-status-completed));
  }
  
  .text-status-running {
    color: rgb(var(--color-status-running));
  }
  
  .text-status-pending {
    color: rgb(var(--color-status-pending));
  }
  
  .text-status-error {
    color: rgb(var(--color-status-error));
  }
  
  .bg-status-completed\/10 {
    background-color: rgb(var(--color-status-completed) / 0.1);
  }
  
  .bg-status-running\/10 {
    background-color: rgb(var(--color-status-running) / 0.1);
  }
  
  .bg-status-pending\/10 {
    background-color: rgb(var(--color-status-pending) / 0.1);
  }
  
  .bg-status-error\/10 {
    background-color: rgb(var(--color-status-error) / 0.1);
  }
  
  /* 动画工具类 */
  .animate-pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  .animate-bounce-gentle {
    animation: bounce 2s infinite;
  }
}

/* Ensure proper spacing in collapsed state */
.markdown-content.line-clamp-3 > *:nth-child(n+4) {
  display: none;
}

/* Override line-clamp when expanded */
.markdown-content:not(.line-clamp-3) {
  display: block;
  -webkit-line-clamp: unset;
  -webkit-box-orient: unset;
  overflow: visible;
}

/* 滚动条样式 */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:bg-gray-800 rounded-full;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-600 rounded-full hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors duration-200;
}

/* 涟漪效果 */
.ripple {
  position: relative;
  overflow: hidden;
}

.ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.3s, height 0.3s;
}

.ripple:active::after {
  width: 100px;
  height: 100px;
}

/* 脉冲阴影效果 */
@keyframes pulse-shadow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
  }
}

.shadow-pulse {
  animation: pulse-shadow 2s infinite;
}

/* 缓慢旋转动画 */
@keyframes spin-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.animate-spin-slow {
  animation: spin-slow 3s linear infinite;
}

/* 渐变背景动画 */
@keyframes gradient-shift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.animate-gradient {
  background: linear-gradient(-45deg, #6366F1, #818CF8, #3B82F6, #60A5FA);
  background-size: 400% 400%;
  animation: gradient-shift 15s ease infinite;
}

/* 玻璃态效果 */
.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass {
  background: rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* 响应式工具类 */
@media (max-width: 768px) {
  .mobile\:flex-col {
    flex-direction: column;
  }
  
  .mobile\:w-full {
    width: 100%;
  }
  
  .mobile\:text-center {
    text-align: center;
  }
}

/* 打印样式优化 */
@media print {
  .no-print {
    display: none !important;
  }
  
  .print\:block {
    display: block !important;
  }
}